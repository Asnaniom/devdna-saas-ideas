<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuilderIndex - Your Profile, Your Next Venture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --dev-bg: #0d1117; --dev-text: #c9d1d9; --dev-accent: #58a6ff; --dev-border: #30363d; --dev-green: #3fb950; }
        body { font-family: 'Inter', sans-serif; background-color: var(--dev-bg); color: var(--dev-text); letter-spacing: -0.01em; margin: 0; }
        .code-font { font-family: 'JetBrains Mono', monospace; }
        .dev-card { background: #161b22; border: 1px solid var(--dev-border); border-radius: 12px; }
        .dev-input { background: #0d1117; border: 1px solid var(--dev-border); color: white; }
        .dev-input:focus { border-color: var(--dev-accent); outline: none; }
        .terminal-header { background: #21262d; border-bottom: 1px solid var(--dev-border); padding: 8px 16px; border-radius: 12px 12px 0 0; display: flex; gap: 6px; align-items: center; }
        .dot { width: 10px; height: 10px; border-radius: 50%; }
        .grid-bg { background-image: radial-gradient(#30363d 1px, transparent 1px); background-size: 40px 40px; }
        .loader-bar { height: 2px; background: #58a6ff; width: 0%; transition: width 0.3s ease; }
        @keyframes pulse-soft { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .analyzing-text { animation: pulse-soft 1.5s infinite; }
        .dna-stat-card { background: linear-gradient(180deg, rgba(22, 27, 34, 0.5) 0%, rgba(13, 17, 23, 0.5) 100%); border: 1px solid var(--dev-border); border-radius: 12px; padding: 24px; }
    </style>
</head>
<body class="min-h-screen grid-bg">
    <div id="app">
        <div id="landing" class="min-h-screen flex flex-col items-center justify-center p-6 text-center">
            <h1 class="text-7xl md:text-9xl font-black mb-8 tracking-tighter text-white uppercase italic">Builder<span class="text-blue-500">Index</span></h1>
            <p class="text-xl text-gray-400 mb-12 max-w-2xl leading-relaxed font-light code-font">\\> Analyzing repositories to identify high-potential <span class="text-white font-medium">SaaS opportunities</span>.</p>
            <div class="w-full max-w-xl dev-card shadow-2xl overflow-hidden text-left bg-[#0d1117]">
                <div class="terminal-header">
                    <div class="dot bg-[#ff5f56]"></div>
                    <div class="dot bg-[#ffbd2e]"></div>
                    <div class="dot bg-[#27c93f]"></div>
                    <span class="ml-4 text-[10px] text-gray-500 code-font uppercase tracking-widest">profile-scanner / v2.5</span>
                </div>
                <div class="p-10">
                    <div id="inputForm">
                        <label class="block text-[10px] font-bold text-gray-500 uppercase tracking-[0.2em] mb-4 code-font">Source Identity</label>
                        <input type="text" id="username" placeholder="Username or Profile URL" class="w-full px-5 py-4 dev-input rounded-lg mb-8 text-lg code-font transition-all border-[#30363d]">
                        <button onclick="startAnalysis()" id="analyzeBtn" class="w-full bg-[#3fb950] hover:bg-[#46c958] text-white font-bold py-5 rounded-lg transition duration-300 text-lg flex items-center justify-center gap-3">Analyse My Builder DNA <span class="text-white/50 text-xl">‚Üµ</span></button>
                    </div>
                    <div id="loadingState" class="hidden">
                        <div class="mb-6 flex justify-between items-center text-xs code-font text-blue-400 uppercase tracking-widest">
                            <span id="loadingTask" class="analyzing-text">Fetching Profile...</span>
                            <span id="loadingPercent">0%</span>
                        </div>
                        <div class="w-full bg-[#161b22] h-1 rounded-full overflow-hidden mb-8">
                            <div id="progressBar" class="loader-bar"></div>
                        </div>
                        <div id="loadingLogs" class="space-y-2 text-[10px] text-gray-600 code-font h-32 overflow-y-auto"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="results" class="hidden min-h-screen p-6 md:p-12">
            <div class="max-w-6xl mx-auto">
                <div class="flex flex-col md:flex-row gap-8 mb-12">
                    <div class="w-full md:w-1/3">
                        <div class="dev-card p-8 text-center">
                            <div class="relative inline-block mb-6">
                                <img id="avatar" src="" alt="Profile" class="w-32 h-32 rounded-2xl border-2 border-blue-500/20 grayscale hover:grayscale-0 transition-all duration-500 shadow-2xl">
                                <div class="absolute -bottom-2 -right-2 bg-blue-500 text-white text-[8px] font-black px-2 py-1 rounded-md tracking-tighter shadow-lg">LIVE</div>
                            </div>
                            <h2 id="fullName" class="text-3xl font-black text-white mb-2 tracking-tighter uppercase italic">DAN</h2>
                            <p id="githubLink" class="text-blue-400 code-font text-sm mb-6">@gaearon</p>
                            <div id="archetypeBadge" class="inline-block bg-purple-500/10 text-purple-400 text-[10px] font-bold px-4 py-2 rounded-full border border-purple-500/20 uppercase tracking-widest mb-8">Product Visionary</div>
                            <div id="languageTags" class="flex flex-wrap justify-center gap-2 mb-8"></div>
                            <div class="grid grid-cols-2 gap-4 border-t border-[#30363d] pt-8">
                                <div class="text-center">
                                    <div id="repoCount" class="text-2xl font-black text-white">295</div>
                                    <div class="text-[8px] text-gray-500 uppercase tracking-widest font-bold">Repos</div>
                                </div>
                                <div class="text-center">
                                    <div id="followerCount" class="text-2xl font-black text-white">90397</div>
                                    <div class="text-[8px] text-gray-500 uppercase tracking-widest font-bold">Followers</div>
                                </div>
                            </div>
                            <div class="mt-8 pt-8 border-t border-[#30363d] flex gap-4">
                                <button onclick="shareDNA('twitter')" class="flex-1 bg-[#1c2128] hover:bg-[#21262d] text-gray-400 text-[10px] font-bold py-3 rounded-lg border border-[#30363d] uppercase tracking-widest transition-all">Share on X</button>
                                <button onclick="shareDNA('linkedin')" class="flex-1 bg-[#1c2128] hover:bg-[#21262d] text-gray-400 text-[10px] font-bold py-3 rounded-lg border border-[#30363d] uppercase tracking-widest transition-all">LinkedIn</button>
                            </div>
                        </div>
                    </div>
                    <div class="w-full md:w-2/3 space-y-6">
                        <div class="dna-stat-card">
                            <div class="flex justify-between items-end mb-4">
                                <h3 class="text-gray-400 text-[10px] font-bold uppercase tracking-widest">Architectural Rigor</h3>
                                <span id="rigorScore" class="text-3xl font-black text-white italic">0%</span>
                            </div>
                            <div class="w-full bg-[#0d1117] h-2 rounded-full overflow-hidden border border-[#30363d]">
                                <div id="rigorBar" class="h-full bg-blue-500 transition-all duration-1000" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="dna-stat-card">
                            <div class="flex justify-between items-end mb-4">
                                <h3 class="text-gray-400 text-[10px] font-bold uppercase tracking-widest">Innovation Velocity</h3>
                                <span id="velocityScore" class="text-3xl font-black text-white italic">0%</span>
                            </div>
                            <div class="w-full bg-[#0d1117] h-2 rounded-full overflow-hidden border border-[#30363d]">
                                <div id="velocityBar" class="h-full bg-purple-500 transition-all duration-1000" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="dna-stat-card">
                            <div class="flex justify-between items-end mb-4">
                                <h3 class="text-gray-400 text-[10px] font-bold uppercase tracking-widest">Market Readiness</h3>
                                <span id="readinessScore" class="text-3xl font-black text-white italic">0%</span>
                            </div>
                            <div class="w-full bg-[#0d1117] h-2 rounded-full overflow-hidden border border-[#30363d]">
                                <div id="readinessBar" class="h-full bg-green-500 transition-all duration-1000" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mb-12 flex items-center gap-6">
                    <div class="h-[1px] flex-grow bg-gradient-to-r from-transparent to-[#30363d]"></div>
                    <h3 class="text-white font-black text-2xl tracking-tighter uppercase italic flex items-center gap-4"><span class="text-blue-500 text-3xl font-normal">\\></span> Target Ventures</h3>
                    <div class="h-[1px] flex-grow bg-gradient-to-l from-transparent to-[#30363d]"></div>
                </div>

                <div id="resultsLoading" class="hidden mb-12 flex items-center justify-center gap-4">
                    <div class="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                    <span class="text-gray-500 text-[10px] uppercase font-bold tracking-widest">Calculating next set...</span>
                </div>

                <div id="ideasGrid" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12"></div>

                <div id="generateMoreContainer" class="text-center mb-12">
                    <button id="generateMoreBtn" onclick="triggerMore()" class="inline-flex items-center px-12 py-5 bg-white text-black font-black uppercase italic tracking-tighter rounded-lg hover:scale-105 transition-all duration-300 shadow-2xl">Generate 3 More Ideas <span class="ml-2 text-gray-400">‚Üí</span></button>
                </div>

                <div id="secondaryLoading" class="hidden max-w-xl mx-auto mb-12">
                    <div class="mb-4 flex justify-between items-center text-[10px] code-font text-blue-400 uppercase tracking-widest">
                        <span id="secondaryTask">Analyzing Patterns...</span>
                        <span id="secondaryPercent">0%</span>
                    </div>
                    <div class="w-full bg-[#161b22] h-1 rounded-full overflow-hidden">
                        <div id="secondaryBar" class="loader-bar"></div>
                    </div>
                </div>

                <div id="emailGate" class="hidden max-w-2xl mx-auto text-center">
                    <div class="dev-card p-12 relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5"></div>
                        <h3 class="text-3xl font-black text-white mb-4 tracking-tighter uppercase italic">Access Full Stack Index</h3>
                        <p class="text-gray-500 mb-8 font-light leading-relaxed">Join the waitlist to unlock more opportunities.</p>
                        <div class="flex flex-col md:flex-row gap-4 relative z-10">
                            <input type="email" id="userEmail" placeholder="founder@builderindex.io" class="flex-grow px-7 py-5 rounded-xl dev-input focus:outline-none text-lg code-font border-[#30363d]">
                            <button onclick="unlockUnlimited()" class="bg-[#3fb950] hover:bg-[#46c958] text-white font-bold px-10 py-5 rounded-xl transition duration-300 uppercase tracking-widest shadow-xl">Unlock</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUserData = null;
        let ideasGenerated = 0;
        let isUnlocked = false;
        let shownIdeaIndices = new Set();

        const ideaPools = {
            'AI/ML Architect': [
                { title: 'Predictive Churn Engine', desc: 'ML-driven analytics to predict customer churn before it happens.', emoji: 'üìà', tags: ['AI', 'B2B'] },
                { title: 'Automated Model Tuner', desc: 'Hyperparameter optimization for production neural networks.', emoji: '‚öôÔ∏è', tags: ['MLOps', 'Python'] },
                { title: 'Synthetic Data Forge', desc: 'Generate privacy-compliant training data for healthcare AI.', emoji: 'üß™', tags: ['Privacy', 'Data'] },
                { title: 'Edge AI Monitor', desc: 'Real-time performance tracking for models on mobile devices.', emoji: 'üì±', tags: ['IoT', 'Edge'] },
                { title: 'NLP Legal Auditor', desc: 'Scan contracts for risky clauses using transformer models.', emoji: '‚öñÔ∏è', tags: ['LegalTech', 'AI'] },
                { title: 'Vision Quality Guard', desc: 'Automated defect detection for manufacturing assembly lines.', emoji: 'üëÅÔ∏è', tags: ['Computer Vision', 'Python'] },
                { title: 'Recommendation API', desc: 'Plug-and-play personalization for niche e-commerce sites.', emoji: 'üõçÔ∏è', tags: ['API', 'Retail'] },
                { title: 'Deepfake Audio Shield', desc: 'Biometric verification to prevent voice phishing attacks.', emoji: 'üéôÔ∏è', tags: ['Security', 'AI'] },
                { title: 'Log Anomaly Detector', desc: 'Zero-config security monitoring for cloud infrastructure logs.', emoji: 'üõ°Ô∏è', tags: ['Security', 'ML'] },
                { title: 'Semantic Search Pro', desc: 'Vector-based internal documentation search for large teams.', emoji: 'üîç', tags: ['Search', 'AI'] }
            ],
            'Product Visionary': [
                { title: 'Real-time UI Sync', desc: 'Collaborative design-to-code bridge for frontend teams.', emoji: 'üé®', tags: ['Design', 'SaaS'] },
                { title: 'Micro-Frontend Orchestrator', desc: 'No-code dashboard for managing complex web apps.', emoji: 'üß©', tags: ['DevTools', 'Web'] },
                { title: 'Interactive Story Builder', desc: 'Low-code platform for building branch-logic user guides.', emoji: 'üìñ', tags: ['UX', 'Product'] },
                { title: 'Feedback Loop Hub', desc: 'Automated user sentiment analysis from social and reviews.', emoji: 'üí¨', tags: ['CX', 'Analytics'] },
                { title: 'Feature Flag Manager', desc: 'Enterprise-grade rollout control for rapid product ships.', emoji: 'üö©', tags: ['DevOps', 'Product'] },
                { title: 'Design System Auditor', desc: 'Scan components for accessibility and brand compliance.', emoji: '‚ôø', tags: ['Design', 'Web'] },
                { title: 'Collaborative Whiteboard API', desc: 'Add visual collaboration to any existing SaaS product.', emoji: 'üñçÔ∏è', tags: ['API', 'Collab'] },
                { title: 'Conversion Heatmap Pro', desc: 'AI-driven insights into why users drop off in funnels.', emoji: 'üî•', tags: ['CRO', 'Marketing'] },
                { title: 'A/B Test Autopilot', desc: 'ML-driven variation testing for landing page conversion.', emoji: 'üß™', tags: ['SaaS', 'Marketing'] },
                { title: 'Customer Journey Mapper', desc: 'Live visualization of how users interact with your app.', emoji: 'üó∫Ô∏è', tags: ['UX', 'Data'] }
            ]
        };

        Object.assign(ideaPools, {
            'Scale Specialist': [
                { title: 'Type-Safe API Gateway', desc: 'Auto-generate clients for complex microservices architecture.', emoji: 'üåâ', tags: ['TS', 'DevTools'] },
                { title: 'Distributed Cache Manager', desc: 'Predictive data hydration for global edge deployments.', emoji: 'üßä', tags: ['Cloud', 'Scalability'] },
                { title: 'Global State Sync', desc: 'Serverless state management for multi-region apps.', emoji: 'üåç', tags: ['TS', 'Backend'] },
                { title: 'API Performance Shield', desc: 'Rate-limiting and DDoS protection for GraphQL endpoints.', emoji: 'üõ°Ô∏è', tags: ['Security', 'Scale'] },
                { title: 'Micro-Service Blueprint', desc: 'Instant scaffolding for scalable TypeScript backends.', emoji: 'üèóÔ∏è', tags: ['DevOps', 'TS'] }
            ],
            'System Core Engineer': [
                { title: 'Low-Latency Engine', desc: 'High-performance core for real-time trading systems.', emoji: 'üèéÔ∏è', tags: ['C++', 'Finance'] },
                { title: 'Game Engine Toolkit', desc: 'Custom physics and rendering plugins for game devs.', emoji: 'üéÆ', tags: ['Graphics', 'C++'] },
                { title: 'Embedded OS Bridge', desc: 'Interoperability layer for legacy industrial hardware.', emoji: 'üîå', tags: ['IoT', 'System'] },
                { title: 'Memory Safety Auditor', desc: 'Deep static analysis to find leaks in native code.', emoji: 'üß†', tags: ['Security', 'DevTools'] },
                { title: 'Native Performance Profiler', desc: 'Real-time CPU and memory usage visualization for C++.', emoji: 'üìä', tags: ['Performance', 'Native'] }
            ],
            'Cloud Infrastructure Lead': [
                { title: 'Multi-Cloud Deployer', desc: 'Unified control plane for AWS, GCP, and Azure.', emoji: '‚òÅÔ∏è', tags: ['Cloud', 'Go'] },
                { title: 'K8s Cluster Monitor', desc: 'Autonomous scaling and healing for Kubernetes nodes.', emoji: '‚ò∏Ô∏è', tags: ['DevOps', 'K8s'] },
                { title: 'Terraform State Visualizer', desc: 'Live graph of your infrastructure dependencies.', emoji: 'üìà', tags: ['IAC', 'Go'] },
                { title: 'Cloud Cost Optimizer', desc: 'ML-driven recommendations to reduce cloud spend.', emoji: 'üí∏', tags: ['FinOps', 'SaaS'] },
                { title: 'Serverless Runtime Hub', desc: 'High-speed execution environment for edge functions.', emoji: '‚ö°', tags: ['Edge', 'Go'] }
            ]
        });

        function getArchetypePool(archetype) {
            const pool = ideaPools[archetype] || [];
            if (pool.length < 50) {
                const filler = [
                    'Analytics Pro', 'Security Shield', 'Workflow Automator', 'Data Bridge', 'Team Collab Hub',
                    'Scale Specialist Tool', 'Enterprise Dashboard', 'Developer SDK', 'API Integrator',
                    'Infrastructure Manager', 'Smart Scheduler', 'Inventory Tracker', 'Customer Portal',
                    'Marketing Suite', 'Sales Pipeline', 'Support Desk', 'Project Planner', 'Resource Allocator',
                    'Performance Monitor', 'Backup System', 'Compliance Tool', 'User Authenticator',
                    'Payment Gateway', 'Content Manager', 'Digital Asset Hub', 'Event Streamer',
                    'Notification Service', 'Reporting Engine', 'Audit Logger', 'Inventory Monitor',
                    'Feedback Collector', 'Survey Builder', 'Job Board', 'Directory Service', 'Booking Engine',
                    'Messaging Bridge', 'Search Indexer', 'Storage Optimizer', 'Traffic Analyzer',
                    'Error Tracker', 'Log Aggregator', 'Metric Dashboard', 'Deployment Script',
                    'Testing Framework', 'Mock Server', 'Design Tool', 'Documentation Site'
                ];
                filler.forEach((f) => {
                    if (pool.length < 50) {
                        pool.push({
                            title: archetype + ' ' + f,
                            desc: 'A specialized ' + f.toLowerCase() + ' solution designed for ' + archetype + ' workflows.',
                            emoji: 'üõ†Ô∏è',
                            tags: [f.split(' ')[0], 'SaaS']
                        });
                    }
                });
            }
            return pool;
        }

        function startAnalysis() {
            let input = document.getElementById('username').value.trim();
            if (!input) return alert('Input Required');
            document.getElementById('inputForm').classList.add('hidden');
            document.getElementById('loadingState').classList.remove('hidden');
            const logs = ["Establishing secure connection...", "Decoding GitHub DNA...", "Analyzing repository patterns...", "Extracting tech stack fingerprints...", "Calculating builder archetype...", "Generating 50+ personalized SaaS opportunities...", "Finalizing report..."];
            let progress = 0;
            const logEl = document.getElementById('loadingLogs');
            const bar = document.getElementById('progressBar');
            const percent = document.getElementById('loadingPercent');
            const task = document.getElementById('loadingTask');
            let username = input;
            if (input.includes('github.com/')) {
                username = input.split('github.com/')[1].split('/')[0].split('?')[0];
            }
            const interval = setInterval(() => {
                progress += Math.floor(Math.random() * 15) + 5;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => finishAnalysis(username), 500);
                }
                bar.style.width = progress + '%';
                percent.innerText = progress + '%';
                task.innerText = logs[Math.floor((progress/100) * (logs.length-1))];
                const log = document.createElement('div');
                log.innerText = `[${new Date().toLocaleTimeString()}] ${logs[Math.floor(Math.random() * logs.length)]}`;
                logEl.prepend(log);
            }, 300);
        }

        async function finishAnalysis(username) {
            try {
                const response = await fetch(`https://api.github.com/users/${username}`);
                if (!response.ok) throw new Error('404: User Not Found');
                const user = await response.json();
                const repoResponse = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=30`);
                if (!repoResponse.ok) throw new Error('API Rate Limit Exceeded');
                const repos = await repoResponse.json();
                const languages = Array.from(new Set(repos.map(r => r.language).filter(l => l)));
                const stars = repos.reduce((acc, r) => acc + (r.stargazers_count || 0), 0);
                const forks = repos.reduce((acc, r) => acc + (r.forks_count || 0), 0);
                const rigor = Math.min(95, Math.floor((stars / 5) + (repos.length * 3) + (Math.random() * 10)));
                const velocity = Math.min(98, Math.floor((repos.filter(r => new Date(r.updated_at) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)).length * 15) + 20));
                const readiness = Math.min(92, Math.floor((forks / 2) + 45 + (user.blog ? 10 : 0)));
                const lang = languages[0] || 'Full Stack';
                const archetypeMap = {
                    'Python': 'AI/ML Architect', 'JavaScript': 'Product Visionary', 'TypeScript': 'Scale Specialist',
                    'C++': 'System Core Engineer', 'Go': 'Cloud Infrastructure Lead', 'Ruby': 'Rapid Prototyping Expert',
                    'Java': 'Enterprise Strategist', 'Swift': 'Mobile Ecosystem Builder', 'PHP': 'Marketplace Pioneer',
                    'Rust': 'Safety & Performance Lead', 'Kotlin': 'Modern App Architect', 'C#': 'Solution Architect',
                    'C': 'Kernel Specialist', 'Shell': 'Automation Wizard'
                };
                const archetype = archetypeMap[lang] || 'Versatile Builder';
                currentUserData = { user, languages, archetype, stats: { rigor, velocity, readiness } };
                displayResults(user, languages, currentUserData.stats, archetype);
            } catch (error) {
                alert(error.message);
                location.reload();
            }
        }

        function displayResults(user, languages, stats, archetype) {
            document.getElementById('landing').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            document.getElementById('avatar').src = user.avatar_url;
            document.getElementById('fullName').innerText = user.name || user.login;
            document.getElementById('githubLink').innerText = `@${user.login}`;
            document.getElementById('repoCount').innerText = user.public_repos;
            document.getElementById('followerCount').innerText = user.followers;
            document.getElementById('archetypeBadge').innerText = archetype;
            const langContainer = document.getElementById('languageTags');
            langContainer.innerHTML = '';
            languages.slice(0, 5).forEach(l => {
                const span = document.createElement('span');
                span.className = 'px-2 py-1 rounded bg-blue-500/10 text-blue-400 text-[9px] font-bold uppercase border border-blue-500/20 tracking-widest';
                span.innerText = l;
                langContainer.appendChild(span);
            });
            setTimeout(() => {
                animateStat('rigor', stats.rigor);
                animateStat('velocity', stats.velocity);
                animateStat('readiness', stats.readiness);
            }, 500);
            generateInitialIdeas(archetype);
        }

        function animateStat(id, target) {
            const scoreEl = document.getElementById(`${id}Score`);
            const barEl = document.getElementById(`${id}Bar`);
            let current = 0;
            const step = () => {
                current += 1;
                scoreEl.innerText = current + '%';
                if (current < target) requestAnimationFrame(step);
            };
            requestAnimationFrame(step);
            barEl.style.width = target + '%';
        }

        function generateInitialIdeas(archetype) {
            const grid = document.getElementById('ideasGrid');
            grid.innerHTML = '';
            const pool = getArchetypePool(archetype);
            const ideas = getRandomFromPool(pool, 3);
            ideas.forEach(idea => appendIdea(idea));
            ideasGenerated = 3;
        }

        function getRandomFromPool(pool, count) {
            const available = pool.filter((_, i) => !shownIdeaIndices.has(i));
            const shuffled = available.sort(() => 0.5 - Math.random());
            const selected = shuffled.slice(0, count);
            selected.forEach(item => {
                const index = pool.findIndex(ai => ai.title === item.title);
                if (index !== -1) shownIdeaIndices.add(index);
            });
            return selected;
        }

        function triggerMore() {
            if (ideasGenerated >= 50 && !isUnlocked) {
                document.getElementById('generateMoreContainer').classList.add('hidden');
                document.getElementById('emailGate').classList.remove('hidden');
                return;
            }
            const btnContainer = document.getElementById('generateMoreContainer');
            const secondaryLoading = document.getElementById('secondaryLoading');
            const secondaryBar = document.getElementById('secondaryBar');
            const secondaryPercent = document.getElementById('secondaryPercent');
            const secondaryTask = document.getElementById('secondaryTask');
            const headerLoading = document.getElementById('resultsLoading');
            btnContainer.classList.add('hidden');
            secondaryLoading.classList.remove('hidden');
            headerLoading.classList.remove('hidden');
            headerLoading.classList.add('flex');
            const deepLogs = ["Analyzing hidden patterns...", "Synthesizing market data...", "Optimizing ROI metrics...", "Finalizing venture blueprints..."];
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        const pool = getArchetypePool(currentUserData.archetype);
                        const ideas = getRandomFromPool(pool, 3);
                        ideas.forEach(idea => appendIdea(idea));
                        ideasGenerated += 3;
                        secondaryLoading.classList.add('hidden');
                        headerLoading.classList.add('hidden');
                        headerLoading.classList.remove('flex');
                        if (ideasGenerated >= 50 && !isUnlocked) {
                            document.getElementById('emailGate').classList.remove('hidden');
                        } else {
                            btnContainer.classList.remove('hidden');
                        }
                    }, 500);
                }
                secondaryBar.style.width = progress + '%';
                secondaryPercent.innerText = progress + '%';
                secondaryTask.innerText = deepLogs[Math.floor((progress/100) * (deepLogs.length-1))];
            }, 200);
        }

        function appendIdea(idea) {
            const grid = document.getElementById('ideasGrid');
            const card = document.createElement('div');
            card.className = 'dev-card p-10 hover:bg-[#1c2128] transition-all duration-500 group cursor-default opacity-0 translate-y-4';
            card.innerHTML = `<div class="flex items-center justify-between mb-8"><div class="text-5xl group-hover:scale-110 transition-transform duration-500">${idea.emoji}</div><div class="text-[9px] text-gray-600 font-bold uppercase tracking-widest code-font">INDEX_ID: ${Math.floor(Math.random() * 9000) + 1000}</div></div><h4 class="text-2xl font-black mb-4 text-white tracking-tighter group-hover:text-blue-400 transition-colors uppercase italic">${idea.title}</h4><p class="text-gray-500 mb-10 leading-relaxed font-light text-base">${idea.desc}</p><div class="flex flex-wrap gap-3">${idea.tags.map(tag => `<span class="bg-[#0d1117] text-gray-500 text-[9px] font-bold px-3 py-1.5 rounded border border-[#30363d] uppercase tracking-[0.15em] code-font">${tag}</span>`).join('')}</div>`;
            grid.appendChild(card);
            setTimeout(() => {
                card.classList.remove('opacity-0', 'translate-y-4');
                card.classList.add('opacity-100', 'translate-y-0');
            }, 100);
        }

        function unlockUnlimited() {
            const email = document.getElementById('userEmail').value;
            if (!email || !email.includes('@')) return alert('Invalid Protocol');
            isUnlocked = true;
            document.getElementById('emailGate').classList.add('hidden');
            document.getElementById('generateMoreContainer').classList.remove('hidden');
            document.getElementById('generateMoreBtn').innerHTML = 'Generate Unlimited Ideas <span class="ml-2 text-gray-400">‚àû</span>';
        }

        function shareDNA(platform) {
            const archetype = document.getElementById('archetypeBadge').innerText;
            const user = document.getElementById('fullName').innerText;
            const text = `I just analyzed my GitHub DNA on BuilderIndex! üöÄ\n\nMy Archetype: ${archetype}\n\nDiscover your next SaaS venture at https://asnaniom.github.io/builderindex/`;
            const url = platform === 'twitter' ? `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}` : `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent('https://asnaniom.github.io/builderindex/')}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
